<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ScinSuite: Lib.LibFILDSIM Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ScinSuite
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">Scintillator data Analysis</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceLib.html">Lib</a></li><li class="navelem"><a class="el" href="namespaceLib_1_1LibFILDSIM.html">LibFILDSIM</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Lib.LibFILDSIM Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae2433baa8cf7bb35e1e780fc7b8749ac"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceLib_1_1LibFILDSIM.html#ae2433baa8cf7bb35e1e780fc7b8749ac">calculate_fild_orientation</a> (br, bz, bt, alpha, beta)</td></tr>
<tr class="memdesc:ae2433baa8cf7bb35e1e780fc7b8749ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to calculate the magnetic field orientation with tespect to FILD.  <a href="namespaceLib_1_1LibFILDSIM.html#ae2433baa8cf7bb35e1e780fc7b8749ac">More...</a><br /></td></tr>
<tr class="separator:ae2433baa8cf7bb35e1e780fc7b8749ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9a399efa2f9715e7436a566d5577f5d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceLib_1_1LibFILDSIM.html#ac9a399efa2f9715e7436a566d5577f5d">calculate_absolute_calibration_frame</a> (cal_frame, exposure_time, pinhole_area, calib_exposure_time, int_photon_flux, pixel_area_covered)</td></tr>
<tr class="memdesc:ac9a399efa2f9715e7436a566d5577f5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate absolute photon flux.  <a href="namespaceLib_1_1LibFILDSIM.html#ac9a399efa2f9715e7436a566d5577f5d">More...</a><br /></td></tr>
<tr class="separator:ac9a399efa2f9715e7436a566d5577f5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a625b992c5fe3f4f47682f8953d170223"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceLib_1_1LibFILDSIM.html#a625b992c5fe3f4f47682f8953d170223">calculate_absolute_flux</a> (raw_frame, calibration_frame, efficiency_energy, efficiency_yield, b_field, band_pass_filter, interpolated_gyro, interpolated_fcol, roi, pinhole_area, exposure_time, A, Z, calib_exposure_time, pixel_area_covered, int_photon_flux, method, ignore_fcol=False, lower_limit=0.05)</td></tr>
<tr class="memdesc:a625b992c5fe3f4f47682f8953d170223"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to estimate absolute flux of losses.  <a href="namespaceLib_1_1LibFILDSIM.html#a625b992c5fe3f4f47682f8953d170223">More...</a><br /></td></tr>
<tr class="separator:a625b992c5fe3f4f47682f8953d170223"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3c4df99caedc50fa42399c7f3000d65"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceLib_1_1LibFILDSIM.html#ae3c4df99caedc50fa42399c7f3000d65">get_energy_FILD</a> (gyroradius, float B, int A=2, int Z=1)</td></tr>
<tr class="memdesc:ae3c4df99caedc50fa42399c7f3000d65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Relate the gyroradius with the asociated energy (with the convenia given in FILDSIM.  <a href="namespaceLib_1_1LibFILDSIM.html#ae3c4df99caedc50fa42399c7f3000d65">More...</a><br /></td></tr>
<tr class="separator:ae3c4df99caedc50fa42399c7f3000d65"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac9a399efa2f9715e7436a566d5577f5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9a399efa2f9715e7436a566d5577f5d">&#9670;&nbsp;</a></span>calculate_absolute_calibration_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Lib.LibFILDSIM.calculate_absolute_calibration_frame </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cal_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>exposure_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pinhole_area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>calib_exposure_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>int_photon_flux</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pixel_area_covered</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate absolute photon flux. </p>
<pre class="fragment">@param cal_frame: calibration frame [counts]
@param exposure_time: in s
@param pinhole_area: in m^2
@param calib_exposure_time: in s
@param int_photon_flux: in Photons/(s m^2)
@param pixel_area_covered: in m^2
@return frame: Calibrated frame [Counts * s * m^2 / photons]
</pre> 
<p class="definition">Definition at line <a class="el" href="LibFILDSIM_8py_source.html#l00072">72</a> of file <a class="el" href="LibFILDSIM_8py_source.html">LibFILDSIM.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                                         pixel_area_covered):</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="stringliteral">    Calculate absolute photon flux</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="stringliteral">    @param cal_frame: calibration frame [counts]</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="stringliteral">    @param exposure_time: in s</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="stringliteral">    @param pinhole_area: in m^2</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="stringliteral">    @param calib_exposure_time: in s</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="stringliteral">    @param int_photon_flux: in Photons/(s m^2)</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="stringliteral">    @param pixel_area_covered: in m^2</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="stringliteral">    @return frame: Calibrated frame [Counts * s * m^2 / photons]</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    frame = cal_frame * exposure_time * pinhole_area / (</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                calib_exposure_time * int_photon_flux * pixel_area_covered)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">return</span> frame</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a625b992c5fe3f4f47682f8953d170223"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a625b992c5fe3f4f47682f8953d170223">&#9670;&nbsp;</a></span>calculate_absolute_flux()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Lib.LibFILDSIM.calculate_absolute_flux </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>raw_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>calibration_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>efficiency_energy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>efficiency_yield</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>b_field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>band_pass_filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>interpolated_gyro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>interpolated_fcol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>roi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pinhole_area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>exposure_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>calib_exposure_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pixel_area_covered</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>int_photon_flux</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ignore_fcol</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lower_limit</em> = <code>0.05</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Routine to estimate absolute flux of losses. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>this is half done Based on the IDL routine writen by J. Galdón (<a href="#" onclick="location.href='mai'+'lto:'+'jga'+'ld'+'on@'+'us'+'.es'; return false;">jgald<span style="display: none;">.nosp@m.</span>on@u<span style="display: none;">.nosp@m.</span>s.es</a>)</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">raw_frame</td><td>as 2D numpy array </td></tr>
    <tr><td class="paramname">calibration_frame</td><td>as 2D numpy array </td></tr>
    <tr><td class="paramname">efficiency_energy</td><td>[Energy given in eV] </td></tr>
    <tr><td class="paramname">efficiency_yield</td><td>[Gieven in photons /ion] </td></tr>
    <tr><td class="paramname">b_field</td><td>[T] </td></tr>
    <tr><td class="paramname">band_pass_filter</td><td></td></tr>
    <tr><td class="paramname">interpolated_gyro</td><td>[cm] </td></tr>
    <tr><td class="paramname">interpolated_fcol</td><td>[Nscint/Npinhole*100] </td></tr>
    <tr><td class="paramname">roi</td><td></td></tr>
    <tr><td class="paramname">pinhole_area</td><td>[m^2] </td></tr>
    <tr><td class="paramname">exposure_time</td><td>[s] </td></tr>
    <tr><td class="paramname">A</td><td></td></tr>
    <tr><td class="paramname">Z</td><td></td></tr>
    <tr><td class="paramname">calib_exposure_time</td><td></td></tr>
    <tr><td class="paramname">pixel_area_covered</td><td></td></tr>
    <tr><td class="paramname">int_photon_flux</td><td></td></tr>
    <tr><td class="paramname">method</td><td></td></tr>
    <tr><td class="paramname">ignore_fcol</td><td></td></tr>
    <tr><td class="paramname">lower_limit</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: </dd></dl>

<p class="definition">Definition at line <a class="el" href="LibFILDSIM_8py_source.html#l00094">94</a> of file <a class="el" href="LibFILDSIM_8py_source.html">LibFILDSIM.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                            lower_limit=0.05):</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="stringliteral">    Routine to estimate absolute flux of losses</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="stringliteral">    @todo this is half done</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="stringliteral">    Based on the IDL routine writen by J. Galdón (jgaldon@us.es)</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="stringliteral">    @param raw_frame: as 2D numpy array</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="stringliteral">    @param calibration_frame: as 2D numpy array</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="stringliteral">    @param efficiency_energy: [Energy given in eV]</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="stringliteral">    @param efficiency_yield:  [Gieven in photons /ion]</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="stringliteral">    @param b_field: [T]</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="stringliteral">    @param band_pass_filter:</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="stringliteral">    @param interpolated_gyro: [cm]</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="stringliteral">    @param interpolated_fcol: [Nscint/Npinhole*100]</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="stringliteral">    @param roi:</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="stringliteral">    @param pinhole_area: [m^2]</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="stringliteral">    @param exposure_time: [s]</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="stringliteral">    @param A:</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="stringliteral">    @param Z:</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="stringliteral">    @param calib_exposure_time:</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="stringliteral">    @param pixel_area_covered:</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="stringliteral">    @param int_photon_flux:</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="stringliteral">    @param method:</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="stringliteral">    @param ignore_fcol:</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="stringliteral">    @param lower_limit:</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="stringliteral">    @return:</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment"># Check if we are ignoring the collimator factor which means that we will</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment"># do the calculation in the scintillator, not at the pinhole [Real</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment"># plasma losses are at the pinhole, not the scintillator]</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span> ignore_fcol:</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        interpolated_fcol = interpolated_fcol * 0 + 1.0</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        print(<span class="stringliteral">&#39;Ignoring collimator factor&#39;</span>,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;              <span class="stringliteral">&#39;--&gt; Calculating Ion Flux at the scintillator not the pinhole!!!&#39;</span>)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="comment"># FILDSIM gives data in %, let&#39;s normalise it to unity to work</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        interpolated_fcol = interpolated_fcol / 100.0</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="comment"># Remove values which are to low, just to avoid numerical problems,</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="comment"># as the collimator factors goes in the denominator of the final</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="comment"># expression</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        flags = interpolated_fcol &lt; lower_limit</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        interpolated_fcol[flags] = 0.0</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment"># Check frames sizes and resize if necessary</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">if</span> raw_frame.shape != raw_frame.shape:</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        print(<span class="stringliteral">&#39;Size of the data frame and calibration frame not matching!!&#39;</span>)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        print(<span class="stringliteral">&#39;Artifitially resizing the calibration frame!!&#39;</span>)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment"># Check if the remap was done before calling this function</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">if</span> np.max(interpolated_gyro) &lt;= 0:</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        print(<span class="stringliteral">&#39;Remap was not done before call this function. Returning&#39;</span>)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">return</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment"># Transform gyroradius to energy</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    interpolated_energy = 0.5 * (interpolated_gyro / 100.0) ** 2 * b_field **\</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                          2 * Z ** 2 / ssp.mp * ssp.c ** 2</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    efficiency_frame = np.interp(interpolated_energy, efficiency_energy,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                                 efficiency_yield)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    efficiency_frame[efficiency_energy &lt; 1.0] = 1.0</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae2433baa8cf7bb35e1e780fc7b8749ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2433baa8cf7bb35e1e780fc7b8749ac">&#9670;&nbsp;</a></span>calculate_fild_orientation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Lib.LibFILDSIM.calculate_fild_orientation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>br</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>alpha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>beta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Routine to calculate the magnetic field orientation with tespect to FILD. </p>
<p>Important note, the original routine writen by joaquin in IDL received as input bt, br, bz... notice the diferent order or the inputs, to be consistent with the rest of this suite</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">br</td><td>Magnetic field in the r direction </td></tr>
    <tr><td class="paramname">bz</td><td>Magnetic field in the z direction </td></tr>
    <tr><td class="paramname">bt</td><td>Magnetic field in the toroidal direction </td></tr>
    <tr><td class="paramname">alpha</td><td>Poloidal orientation of FILD. Given in deg </td></tr>
    <tr><td class="paramname">beta</td><td>Pitch orientation of FILD, given in deg </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>theta: Euler angle to use as input in fildsim.f90 given in deg </dd>
<dd>
phi: Euler angle to use as input in fildsim.f90 given in deg </dd></dl>

<p class="definition">Definition at line <a class="el" href="LibFILDSIM_8py_source.html#l00009">9</a> of file <a class="el" href="LibFILDSIM_8py_source.html">LibFILDSIM.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceLib_1_1LibFILDSIM.html#ae2433baa8cf7bb35e1e780fc7b8749ac">calculate_fild_orientation</a>(br, bz, bt, alpha, beta):</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="stringliteral">    Routine to calculate the magnetic field orientation with tespect to FILD</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="stringliteral">    Important note, the original routine writen by joaquin in IDL received as</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="stringliteral">    input bt, br, bz... notice the diferent order or the inputs,</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="stringliteral">    to be consistent with the rest of this suite</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="stringliteral">    @param br: Magnetic field in the r direction</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="stringliteral">    @param bz: Magnetic field in the z direction</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="stringliteral">    @param bt: Magnetic field in the toroidal direction</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="stringliteral">    @param alpha: Poloidal orientation of FILD. Given in deg</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="stringliteral">    @param beta: Pitch orientation of FILD, given in deg</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="stringliteral">    @return theta: Euler angle to use as input in fildsim.f90 given in deg</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="stringliteral">    @return phi: Euler angle to use as input in fildsim.f90 given in deg</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="comment"># In AUG the magnetic field orientation is counter current.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="comment"># FILDSIM.f90 works with the co-current reference</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keywordflow">if</span> bt &lt; 0:</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        bt = -bt</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        br = -br</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        bz = -bz</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="comment"># Transform to radians</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    alpha = alpha * np.pi / 180.0</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    beta = beta * np.pi / 180.0</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment"># Refer the orientation of the BField wo the orientation of FILD</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment"># Alpha is measured from R (positive getting away from axis) to Z (positive)</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    bt1 = bt</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    br1 = br * np.cos(alpha) - bz * np.sin(alpha)</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    bz1 = br * np.sin(alpha) + bz * np.cos(alpha)</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="comment"># Now we rotate to the pitch orientation of FILD</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment"># Now we rotate in the toroidal z-plane</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    br2 = br1</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    bt2 = bt1 * np.cos(beta) - bz1 * np.sin(beta)</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    bz2 = bt1 * np.sin(beta) + bz1 * np.cos(beta)</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="comment"># NOW BT2,BZ2 and BR2 are the coordinates referred to the local FILD</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment"># reference.</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment"># According to FILDSIM.f90</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment"># BT2 ---&gt; Y component</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment"># BR2 ---&gt; X component</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment"># BZ2 ---&gt; Z component</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment"># THEN theta and phi are:</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="comment"># PHI --&gt; Euler Angle measured from y(positive) to x(positive)</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment"># THETA --&gt; Euler Angle measured from x(positive) to z(negative)</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    phi = ma.atan(br2 / bt2) * 180.0 / np.pi</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    theta = ma.atan(-bz2 / bt2) * 180.0 / np.pi</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    print(<span class="stringliteral">&#39;Bt, Bz, Br and B: &#39;</span>, bt, bz, br, ma.sqrt(bt**2 + bz**2 + br**2))</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    print(<span class="stringliteral">&#39;FILD orientation is (alpha,beta)= &#39;</span>, alpha * 180.0 / np.pi,</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;          beta * 180.0 / np.pi)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    print(<span class="stringliteral">&#39;Alpha rotation: &#39;</span>, bt1, bz1, br1, ma.sqrt(bt1**2 + bz1**2 + br1**2))</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    print(<span class="stringliteral">&#39;Bx By Bz in FILDSIM are: &#39;</span>, bt2, bz2, br2, ma.sqrt(</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        bt2**2 + bz2**2 + br2**2))</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    print(<span class="stringliteral">&#39;Euler angles are (phi,theta): &#39;</span>, phi, theta)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">return</span> phi, theta</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae3c4df99caedc50fa42399c7f3000d65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3c4df99caedc50fa42399c7f3000d65">&#9670;&nbsp;</a></span>get_energy_FILD()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Lib.LibFILDSIM.get_energy_FILD </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>gyroradius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &#160;</td>
          <td class="paramname"><em>A</em> = <code>2</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &#160;</td>
          <td class="paramname"><em>Z</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Relate the gyroradius with the asociated energy (with the convenia given in FILDSIM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gyroradius</td><td>Perticle Larmor radius as taken from FILD strike map ( in cm) </td></tr>
    <tr><td class="paramname">B</td><td>Magnetc field, in T </td></tr>
    <tr><td class="paramname">A</td><td>Ion mass number </td></tr>
    <tr><td class="paramname">Z</td><td>Ion charge (in e units) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>E: the energy in eV </dd></dl>

<p class="definition">Definition at line <a class="el" href="LibFILDSIM_8py_source.html#l00165">165</a> of file <a class="el" href="LibFILDSIM_8py_source.html">LibFILDSIM.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceLib_1_1LibFILDSIM.html#ae3c4df99caedc50fa42399c7f3000d65">get_energy_FILD</a>(gyroradius, B: float, A: int = 2, Z: int = 1):</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="stringliteral">    Relate the gyroradius with the asociated energy (with the convenia given</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="stringliteral">    in FILDSIM</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="stringliteral">    @param gyroradius: Perticle Larmor radius as taken from FILD strike map (</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="stringliteral">    in cm)</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="stringliteral">    @param B: Magnetc field, in T</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="stringliteral">    @param A: Ion mass number</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="stringliteral">    @param Z: Ion charge (in e units)</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="stringliteral">    @return E: the energy in eV</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    m = ssp.mp * A  <span class="comment"># Mass of the ion</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    E = 0.5 * (gyroradius/100.0 * Z * B)**2 / m * ssp.c ** 2</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">return</span> E</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"># def get_vpara(pitch):  ## DEPRECATED</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">#     &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">#    Gives the projection of the velocity on the magnetic field, given the pitch</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">#</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">#     @param pitch: in deg, as given by FILD strike map</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">#     @return vp: v_parallel/v</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">#     &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">#     return np.cos(pitch * np.pi / 180.0)</span></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<div class="ttc" id="anamespaceLib_1_1LibFILDSIM_html_ae3c4df99caedc50fa42399c7f3000d65"><div class="ttname"><a href="namespaceLib_1_1LibFILDSIM.html#ae3c4df99caedc50fa42399c7f3000d65">Lib.LibFILDSIM.get_energy_FILD</a></div><div class="ttdeci">def get_energy_FILD(gyroradius, float B, int A=2, int Z=1)</div><div class="ttdoc">Relate the gyroradius with the asociated energy (with the convenia given in FILDSIM.</div><div class="ttdef"><b>Definition:</b> <a href="LibFILDSIM_8py_source.html#l00165">LibFILDSIM.py:165</a></div></div>
<div class="ttc" id="anamespaceLib_1_1LibFILDSIM_html_ae2433baa8cf7bb35e1e780fc7b8749ac"><div class="ttname"><a href="namespaceLib_1_1LibFILDSIM.html#ae2433baa8cf7bb35e1e780fc7b8749ac">Lib.LibFILDSIM.calculate_fild_orientation</a></div><div class="ttdeci">def calculate_fild_orientation(br, bz, bt, alpha, beta)</div><div class="ttdoc">Routine to calculate the magnetic field orientation with tespect to FILD.</div><div class="ttdef"><b>Definition:</b> <a href="LibFILDSIM_8py_source.html#l00009">LibFILDSIM.py:9</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
